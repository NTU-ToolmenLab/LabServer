nodeExporter:
  enabled: false
alertmanager:
  enabled: false
pushgateway:
  enabled: false
kubeStateMetrics:
  enabled: false

server:
  persistentVolume:
    enabled: true
    existingClaim: nfs-monitor
    mountPath: /prometheus_data1
    subPath: prometheus_data1
  global:
    scrape_interval: 5s
    scrape_timeout:  15s
  retention: 720h

serverFiles:
  prometheus.yml:
    scrape_configs:
      - job_name: collect-gpu
        metrics_path: /
        kubernetes_sd_configs:
          - role: pod
        scrape_interval: 5s
        relabel_configs:
          - separator: ;
            regex: __meta_kubernetes_pod_(node_name)
            replacement: $1
            action: labelmap
          - source_labels: [__address__]
            regex: "(.+):.*"
            target_label: __address__
            replacement: ${1}:8000
            action: replace
          - source_labels: [__meta_kubernetes_pod_container_name]
            regex: "collect-gpu(.*)"
            action: keep
